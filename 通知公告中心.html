<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ©˜ç»œäº‘æœåŠ¡ - é€šçŸ¥å…¬å‘Šä¸­å¿ƒ</title>
  <link rel="icon" href="logo.png" sizes="any" type="image/png">
  <link rel="preload" as="image" href="background.jpg" fetchpriority="low" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Microsoft YaHei", sans-serif;
    }

    /* ğŸ‘‡ å…³é”®ï¼šç¦æ­¢é¡µé¢æ»šåŠ¨ï¼ŒèƒŒæ™¯å›ºå®š */
    html, body {
      height: 100%;
      overflow: hidden;
      background-image: url('background.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      color: #333;
    }

    /* ğŸš« å‰å·æŒ‰é’®ï¼šå³ä¸Šè§’ï¼Œä¸é®æŒ¡å†…å®¹ */
    .close-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid #ccc;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      color: #888;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: #e3f2fd;
      color: #3498db;
      transform: scale(1.1);
      border-color: #3498db;
    }

    /* ä¸»å®¹å™¨ï¼šç›´è¾¾é¡¶éƒ¨ï¼Œå æ»¡å…¨å± */
    .main-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      z-index: 99;
    }

    /* å¯æ»šåŠ¨åŒºåŸŸï¼šé¡¶éƒ¨ç•™å‡º 50px é˜²æ­¢è¢«å‰å·é®æŒ¡ */
    .scrollable-content {
      flex: 1;
      overflow-y: auto;
      padding: 50px 20px 80px; /* ä¸Šè¾¹è· 50pxï¼Œä¸‹è¾¹è· 80pxï¼ˆç»™æŒ‰é’®ç•™ç©ºé—´ï¼‰ */
      scrollbar-width: thin;
      scrollbar-color: #ccc transparent;
    }

    .scrollable-content::-webkit-scrollbar {
      width: 8px;
    }

    .scrollable-content::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    /* âœ… å¼ºåˆ¶æ¯è¡Œåªæ˜¾ç¤º 2 ä¸ªå…¬å‘Šå¡ç‰‡ */
    .notice-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr); /* â­ å…³é”®ï¼šæ°¸è¿œä¸¤åˆ— */
      gap: 24px;
      justify-content: center;
      max-width: 1100px; /* æ§åˆ¶æ•´ä½“å®½åº¦ï¼Œé˜²æ­¢å¡ç‰‡è¿‡å®½ */
      margin: 0 auto 80px; /* å±…ä¸­ + åº•éƒ¨ç•™ç™½ */
      padding: 0 10px; /* é˜²æ­¢å°å±è´´è¾¹ */
    }

    /* âœ… å¡ç‰‡ä¿æŒåŸå§‹å¤§å°å’Œæ ·å¼ */
    .notice-card {
      background: rgba(255, 255, 255, 0.85);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      transition: transform 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .notice-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .notice-card.selected-for-delete {
      border: 2px solid #e74c3c;
      background: rgba(231, 76, 60, 0.1);
    }

    .notice-title {
      font-size: 18px;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .notice-content {
      font-size: 14px;
      color: #555;
      line-height: 1.6;
      margin-bottom: 12px;
      white-space: pre-wrap;
    }

    .notice-time {
      font-size: 12px;
      color: #999;
      margin-bottom: 10px;
    }

    .attachment-btn {
      display: inline-block;
      padding: 6px 12px;
      background: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 13px;
      transition: background 0.2s;
    }

    .attachment-btn:hover {
      background: #2980b9;
    }

    /* åº•éƒ¨æ“ä½œæ ï¼šå›ºå®šåœ¨å®¹å™¨æœ€åº•éƒ¨ */
    .action-buttons {
      padding: 15px 20px;
      border-top: 1px solid rgba(0,0,0,0.05);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      background: rgba(255, 255, 255, 0.8);
    }

    .add-notice-btn {
      padding: 10px 20px;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }

    .add-notice-btn:hover {
      background: #27ae60;
    }

    .delete-btn {
      background: #e74c3c;
    }

    .delete-btn:hover {
      background: #c0392b;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 28px;
      border-radius: 16px;
      width: 380px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    .input-group {
      margin-bottom: 16px;
    }

    .input-group label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      color: #555;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }

    .submit-btn {
      padding: 10px 20px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }

    .submit-btn:hover {
      background: #2980b9;
    }

    .cancel-btn {
      background: #ccc;
      color: #666;
    }
  </style>
</head>

<body>
  <!-- âœ… å‰å·åœ¨å³ä¸Šè§’ -->
  <div class="close-btn" onclick="window.location.href='index.html'">Ã—</div>

  <!-- ä¸»å®¹å™¨ç›´è¾¾é¡¶éƒ¨ -->
  <div class="main-container">
    <div class="scrollable-content">
      <div id="noticeGrid" class="notice-grid"></div>
    </div>

    <!-- å›ºå®šåº•éƒ¨æ“ä½œæŒ‰é’® -->
    <div class="action-buttons">
      <button class="add-notice-btn" onclick="showAddNoticeAuth()">+ å‘å¸ƒå…¬å‘Š</button>
      <button class="add-notice-btn delete-btn" onclick="triggerDeleteNotice()">ğŸ—‘ï¸ åˆ é™¤å…¬å‘Š</button>
    </div>
  </div>

  <!-- ç®¡ç†å‘˜éªŒè¯æ¨¡æ€æ¡† -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <h3 style="margin-bottom: 16px;">ç®¡ç†å‘˜éªŒè¯</h3>
      <div class="input-group">
        <label for="username">ç”¨æˆ·å</label>
        <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
      </div>
      <div class="input-group">
        <label for="password">å¯†ç </label>
        <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç ">
      </div>
      <button class="submit-btn" onclick="verifyAdmin()">ç¡®è®¤</button>
      <button class="submit-btn cancel-btn" onclick="closeModal()">å–æ¶ˆ</button>
    </div>
  </div>

  <!-- å…¬å‘Šç¼–è¾‘æ¨¡æ€æ¡† -->
  <div id="noticeModal" class="modal">
    <div class="modal-content">
      <h3 id="modalTitle">å‘å¸ƒå…¬å‘Š</h3>
      <input type="hidden" id="editNoticeId">
      <div class="input-group">
        <label for="noticeTitle">å…¬å‘Šæ ‡é¢˜ *</label>
        <input type="text" id="noticeTitle" placeholder="ä¾‹å¦‚ï¼šæœåŠ¡å™¨å‡çº§é€šçŸ¥">
      </div>
      <div class="input-group">
        <label for="noticeContent">å…¬å‘Šå†…å®¹ *</label>
        <textarea id="noticeContent" rows="5" placeholder="è¯·è¾“å…¥å…¬å‘Šè¯¦ç»†å†…å®¹"></textarea>
      </div>
      <div class="input-group">
        <label for="noticeLink">ç™¾åº¦ç½‘ç›˜é“¾æ¥ï¼ˆå¯é€‰ï¼‰</label>
        <input type="url" id="noticeLink" placeholder="https://pan.baidu.com/...">
      </div>
      <button class="submit-btn" onclick="saveNotice()">å‘å¸ƒ</button>
      <button class="submit-btn cancel-btn" onclick="closeNoticeModal()">å–æ¶ˆ</button>
    </div>
  </div>

  <script>
    let noticeData = [
      {
        id: 'n1',
        title: 'æ–°åŠŸèƒ½ä¸Šçº¿é€šçŸ¥',
        content: 'æˆ‘ä»¬å·²ä¸Šçº¿å…¨æ–°çš„APIè°ƒè¯•å·¥å…·ï¼Œæ”¯æŒå®æ—¶æµ‹è¯•ã€æ—¥å¿—è¿½è¸ªä¸é”™è¯¯åˆ†æã€‚\n\næ¬¢è¿å¼€å‘è€…ä½¿ç”¨ï¼',
        time: '2026-02-01',
        link: 'https://pan.baidu.com/s/1example'
      },
      {
        id: 'n2',
        title: 'ç»´æŠ¤è®¡åˆ’',
        content: 'ä¸ºæå‡ç³»ç»Ÿç¨³å®šæ€§ï¼Œå°†äº2æœˆ10æ—¥å‡Œæ™¨2:00è‡³4:00è¿›è¡Œæ•°æ®åº“ä¼˜åŒ–ã€‚\n\næœŸé—´æœåŠ¡å°†çŸ­æš‚ä¸­æ–­ï¼Œè¯·æå‰ä¿å­˜å·¥ä½œã€‚',
        time: '2026-02-05',
        link: ''
      }
    ];

    let selectedNoticeIdForDelete = null;
    let editingNoticeId = null;

    function renderNoticeGrid() {
      const grid = document.getElementById('noticeGrid');
      grid.innerHTML = '';

      if (noticeData.length === 0) {
        grid.innerHTML = `<p style="text-align:center;color:#999;padding:40px;">æš‚æ— å…¬å‘Š</p>`;
        return;
      }

      noticeData.forEach(notice => {
        const card = document.createElement('div');
        card.className = 'notice-card';
        card.dataset.id = notice.id;

        const title = document.createElement('div');
        title.className = 'notice-title';
        title.textContent = notice.title;

        const content = document.createElement('div');
        content.className = 'notice-content';
        content.textContent = notice.content;

        const time = document.createElement('div');
        time.className = 'notice-time';
        time.textContent = `å‘å¸ƒæ—¶é—´ï¼š${notice.time}`;

        card.appendChild(title);
        card.appendChild(content);
        card.appendChild(time);

        if (notice.link && notice.link.trim()) {
          const linkBtn = document.createElement('a');
          linkBtn.href = notice.link;
          linkBtn.target = '_blank';
          linkBtn.className = 'attachment-btn';
          linkBtn.textContent = 'ğŸ“ é™„ä»¶';
          card.appendChild(linkBtn);
        }

        card.addEventListener('click', () => {
          document.querySelectorAll('.notice-card').forEach(c => c.classList.remove('selected-for-delete'));
          card.classList.add('selected-for-delete');
          selectedNoticeIdForDelete = notice.id;
        });

        grid.appendChild(card);
      });
    }

    function showAddNoticeAuth() {
      editingNoticeId = null;
      openAuthModal('add');
    }

    function triggerDeleteNotice() {
      if (!selectedNoticeIdForDelete) {
        alert("è¯·å…ˆç‚¹å‡»ä¸€ä¸ªå…¬å‘Šä»¥é€‰ä¸­è¦åˆ é™¤çš„å…¬å‘Šï¼");
        return;
      }
      openAuthModal('delete');
    }

    function openAuthModal(purpose) {
      window.authPurpose = purpose;
      document.getElementById('authModal').style.display = 'flex';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }

    function closeModal() {
      document.getElementById('authModal').style.display = 'none';
    }

    function verifyAdmin() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      if (username === 'admin' && password === '123456') {
        closeModal();
        if (window.authPurpose === 'add') {
          openAddNoticeModal();
        } else if (window.authPurpose === 'delete') {
          deleteNotice(selectedNoticeIdForDelete);
        }
      } else {
        alert("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼");
      }
    }

    function openAddNoticeModal() {
      document.getElementById('modalTitle').textContent = editingNoticeId ? 'ç¼–è¾‘å…¬å‘Š' : 'å‘å¸ƒå…¬å‘Š';
      const titleInput = document.getElementById('noticeTitle');
      const contentInput = document.getElementById('noticeContent');
      const linkInput = document.getElementById('noticeLink');

      if (editingNoticeId) {
        const notice = noticeData.find(n => n.id === editingNoticeId);
        if (notice) {
          titleInput.value = notice.title;
          contentInput.value = notice.content;
          linkInput.value = notice.link || '';
        }
      } else {
        titleInput.value = '';
        contentInput.value = '';
        linkInput.value = '';
      }

      document.getElementById('editNoticeId').value = editingNoticeId || '';
      document.getElementById('noticeModal').style.display = 'flex';
    }

    function closeNoticeModal() {
      document.getElementById('noticeModal').style.display = 'none';
    }

    function saveNotice() {
      const title = document.getElementById('noticeTitle').value.trim();
      const content = document.getElementById('noticeContent').value.trim();
      const link = document.getElementById('noticeLink').value.trim();

      if (!title || !content) {
        alert("å…¬å‘Šæ ‡é¢˜å’Œå†…å®¹ä¸èƒ½ä¸ºç©ºï¼");
        return;
      }

      const newNotice = {
        id: editingNoticeId || `n${Date.now()}`,
        title,
        content,
        time: new Date().toISOString().split('T')[0],
        link
      };

      if (editingNoticeId) {
        const index = noticeData.findIndex(n => n.id === editingNoticeId);
        if (index !== -1) noticeData[index] = newNotice;
      } else {
        noticeData.push(newNotice);
      }

      closeNoticeModal();
      renderNoticeGrid();
      alert(editingNoticeId ? "å…¬å‘Šå·²æ›´æ–°ï¼" : "å…¬å‘Šå·²å‘å¸ƒï¼");
      editingNoticeId = null;
    }

    function deleteNotice(id) {
      noticeData = noticeData.filter(n => n.id !== id);
      renderNoticeGrid();
      selectedNoticeIdForDelete = null;
      alert("å…¬å‘Šå·²æˆåŠŸåˆ é™¤ï¼");
    }

    window.onclick = function(e) {
      if (e.target.classList.contains('modal')) {
        e.target.style.display = 'none';
      }
    };

    document.addEventListener('DOMContentLoaded', () => {
      renderNoticeGrid();
    });
  </script>
</body>
</html>